<div class="d-flex flex-column course-cover-page w-100">
  <div class="course-show-cover w-100">
    <div class="course-show-main-info w-100">
      <div class="d-flex flex-column">
        <%= link_to "Back to Courses", courses_path, class: "btn-primary", style: "border-left: 5px solid white; padding-left: 10px; color: white;"%>
        <% if current_user == @teacher %>
          <%= link_to "Modify this course", edit_course_path(@course), class: "btn-primary", style: "border-left: 5px solid white; padding-left: 10px; color: white;"%>
        <% end %>
      </div>
      <div class="course-show-title">
        <%=@course.title%>
      </div>
      <div class="course-show-location">
        ğŸ§‘â€ğŸ«  <%=User.find(@course.user_id).name%> ğŸ“ <%=@course.location%>
      </div>
      <div class="course-show-description">
        <%=@course.description%>
      </div>
      <div class="course-show-tags">
        <div class="course-show-tag-first <%=@course.category%>"><%=@course.category%></div>
        <div class="course-show-tag-second <%= @course.online ? "" : "course-show-toggle"%>">online</div>
        <div class="course-show-tag-third"><%=@course.level%></div>
      </div>
    </div>
  </div>
  <div class="course-show-wrapper d-flex justify-content-between align-items-start">

    <div class="course-show-syllabus">
      <h2 style="margin-top: 50px; margin-bottom: 50px; font-size: 50px" class="syllabus">Syllabus</h2>
      <%= simple_format(@course.syllabus) %>
    </div>
    <div class="course-show-price-tag d-none d-md-block">
      <%= cl_image_tag @course.photo.key, class: "course-photo"%>
      <div class="course-show-tag-info pt-2">
        <div class="course-show-tag-info-location">
          <p>ğŸ“ <span style="font-weight: bold">Location:</span> <%=@course.location%></p>
        </div>
        <div class="course-show-tag-info-start-time">
          <p>â±ï¸ <span style="font-weight: bold">Start time:</span> <%=@course.start_time%> (Total: <%=@course.duration/60%> hours)</p>
        </div>
        <div class="course-show-tag-info-price">
          <h2>Â¥ <%=@course.price%></h2>
        </div>
      </div>
      <div class="course-show-btns w-100">
        <% if user_signed_in? %>
          <%= button_to "I want to buy this course!", bookings_path(course_id: @course.id), class: "btn price-btn" %>
          <div class="course-index-heart-wrapping course-show-heart" data-controller="favorite">
            <% favorited = current_user.favorites.exists?(course:@course) if user_signed_in?%>
            <i data-course-id="<%= @course.id %>" data-action="click->favorite#toggle" class="<%= favorited ? 'fas' : 'far' %> fa-heart course-index-heart course-show-heart<%= @course.category %>"></i>
          </div>
        <% else %>
          <%= button_to "Log in to buy this course!", new_user_session_path, class: "btn price-btn-only w-100" %>
        <% end %>
      </div>
    </div>
  </div>
  <div class="course-show-bottom-wrapper d-flex flex-column">
    <h2 style="font-size: 50px; margin-top: 70px;"class="syllabus">Guess what you like....</h2>
    <div class="row">
      <% @category = @course.category%>
      <% @guess_courses = Course.where(category: @category).where.not(id: @course.id).to_a.sample(4)%>
      <% @guess_courses.each do |guess_course|%>
        <%= render "pages/card", course: guess_course%>
      <% end %>
    </div>
  </div>
</div>
